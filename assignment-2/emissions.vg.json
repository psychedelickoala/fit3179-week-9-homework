{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": {
        "text": "Carbon Emissions of Countries over Time",
        "subtitle": "CO2 emissions per capita for various countries/regions, from 1820 to 2022. Source: Our World in Data.",
        "fontSize": 20,
        "subtitleFontSize": 16
    },


    "width": 1000,
    "height": 400,
    "config": {
      "font": "Libre Baskerville"
    },
    "data": {
        "url": "co-emissions-per-capita.csv",
        "format": {
        "type": "csv"
        }
    },

    "transform": [
      {
        "filter": {
          "field": "Entity",
          "oneOf": ["Australia", "China", "United States", "World", "European Union", "India", "Africa"]
        }
      }
    ],

    "layer": [

    {
      "selection": {
        "highlight": {
          "type": "multi",
          "fields": ["Entity"],
          "bind": "legend",
          "init": {"Entity": "Australia"}
        }
      },
      "mark": "line",

      "encoding" : {
      
        "x": {
          "field": "Year",
          "type": "temporal",
          "axis": {"title": "Year", "tickCount": 8}
        },
      "y": {
        "field": "Emissions",
        "type": "quantitative",
        "axis": {"title": "CO2 Emissions (tonnes per person)", "tickCount": 6}
      },
      "color": {
        "field": "Entity",
        "legend": {"title": "Country/Region"},
        "scale": {
          "domain": ["Australia", "China", "United States", "World", "European Union", "India", "Africa"],
          "range": ["gray"]
        },
        "condition": {
          "selection": "highlight",
          "value": "red"
        }

      },
      "opacity": {
        "condition": {
          "selection": "highlight",
          "value": 1
        },
        "value": 0.2
      }


    }
  },
  {
    "mark": {"type": "rule", "color": "lightgreen"},
    "encoding": {
      "x": {
        "value": 915
      }
    }
  },
  {
    "mark": {"type": "text", "color": "gray", "align": "right"},
    "encoding": {
      "x": {
        "value": 910
      },
      "y":{
        "value": 20
      },
      "text": {
        "value": "Kyoto protocol"
      }
    }
  },
  {
    "mark": {"type": "rule", "color": "lightblue", "opacity": 0.2},
    "encoding": {
      "x": {
        "value": 970
      }
    }
  },
  {
    "mark": {"type": "text", "color": "gray", "align": "right"},
    "encoding": {
      "x": {
        "value": 965
      },
      "y":{
        "value": 35
      },
      "text": {
        "value": "Paris agreement"
      }
    }
  },
  {
    "transform": [
      {"pivot": "Entity", "value": "Emissions", "groupby": ["Year"]}

    ],
    "mark": {"type": "rule", "opacity": 0},
    "encoding": {
      "x": {
        "field": "Year",
        "type": "temporal",
        "axis": {"title": "Year", "tickCount": 8}
      },
      "tooltip": [
        {"field": "Year", "type": "temporal", "timeUnit": "year", "title": "Year"},
        {"field": "Australia", "type": "quantitative", "format": ".1f"},
        {"field": "China", "type": "quantitative", "format": ".1f"},
        {"field": "United States", "type": "quantitative", "format": ".1f"},
        {"field": "World", "type": "quantitative", "format": ".1f"},
        {"field": "European Union", "type": "quantitative", "format": ".1f"},
        {"field": "India", "type": "quantitative", "format": ".1f"},
        {"field": "Africa", "type": "quantitative", "format": ".1f"}
      ]
    },
    "params": [{
      "name": "hovering",
      "select": {
        "type": "point",
        "on": "pointerover",
        "clear": "pointerout",
        "nearest": true,
        "fields": ["Year"]
      }
    }]

  }
  ]

    
}
      